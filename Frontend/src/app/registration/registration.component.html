<div class="container">
  <h2>Registrati</h2>
  
  <form (ngSubmit)="onSubmit(registrationForm)" #registrationForm="ngForm" class="form-group">
    <div>
      <label for="username">Username:</label>
      <input 
        type="text" 
        id="username" 
        required 
        minlength="3" 
        maxlength="15"
        [(ngModel)]="username" 
        name="username" 
        class="form-control">
      <div *ngIf="registrationForm.controls['username']?.invalid && registrationForm.controls['username']?.touched">
        <small class="text-danger">Username deve essere lungo tra 3 e 15 caratteri.</small>
      </div>
    </div>
    
    <div>
      <label for="email">Email:</label>
      <input 
        type="email" 
        id="email" 
        required 
        [(ngModel)]="email" 
        name="email" 
        class="form-control"
        pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$">
      <div *ngIf="registrationForm.controls['email']?.invalid && registrationForm.controls['email']?.touched">
        <small class="text-danger">Email non valida.</small>
      </div>
    </div>

    <div>
      <label for="password">Password:</label>
      <input 
        type="password" 
        id="password" 
        required 
        minlength="8" 
        [(ngModel)]="password" 
        name="password" 
        class="form-control">
      <div *ngIf="registrationForm.controls['password']?.invalid && registrationForm.controls['password']?.touched">
        <small class="text-danger">La password deve essere lunga almeno 8 caratteri.</small>
      </div>
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn btn-primary" [disabled]="registrationForm.invalid">Registrati</button>
    </div>
  </form>
  <div *ngIf="successMessage" class="alert alert-success mt-3">{{ successMessage }}</div> 
  <div class="login-link">
    <p>Hai gi√† un account? <a routerLink="/login">Accedi qui</a>.</p>
    Oppure <a href="/home">torna sull'homepage</a>
  </div>
</div>
